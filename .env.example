# ── Helius ──────────────────────────────────────────
HELIUS_API_KEY=
RPC_URL=https://mainnet.helius-rpc.com/?api-key=YOUR_KEY
# Extra RPC endpoints for multi-send and fallback (comma-separated, optional)
EXTRA_RPC_URLS=

# ── Jupiter (get free key at https://portal.jup.ag) ─
JUPITER_API_KEY=

# ── Bot wallet (base58 private key) ────────────────
BOT_PRIVATE_KEY_BASE58=

# ── Source wallet to copy ──────────────────────────
SOURCE_WALLET=89HbgWduLwoxcofWpmn1EiF9wEdpgkNDEyPjzZ72mkDi

# ── Risk parameters ────────────────────────────────
COPY_RATIO=0.25
MAX_SOL_PER_TRADE=1.25
MAX_SOL_PER_DAY=5
MIN_SOL_PER_TRADE=0.03

# ── Position limits ─────────────────────────────────
MAX_OPEN_POSITIONS=10

# ── Slippage & price impact ────────────────────────
SLIPPAGE_BPS=200
MAX_PRICE_IMPACT_BPS=800
# Dynamic slippage: let Jupiter auto-adjust slippage (overrides SLIPPAGE_BPS)
USE_DYNAMIC_SLIPPAGE=false
# Restrict intermediate tokens on Jupiter routes (OFF by default — causes "no route" on micro-caps)
RESTRICT_INTERMEDIATE_TOKENS=false

# ── Price Drift Guard ────────────────────────────────
# Max allowed price increase between source trade and bot quote (0–1, e.g. 0.2 = 20%)
# Set to 0 to disable the guard entirely.
MAX_PRICE_DRIFT_PCT=0.2

# ── Priority fee (lamports) for fast tx landing ────
PRIORITY_FEE_LAMPORTS=100000
# Dynamic priority fee: fetch recent network fees and auto-adjust (capped by PRIORITY_FEE_LAMPORTS)
USE_DYNAMIC_PRIORITY_FEE=false

# ── Cooldown (BUY only, sells are never delayed) ──
COOLDOWN_SECONDS_PER_TOKEN=20

# ── Token safety ───────────────────────────────────
BLOCK_IF_MINT_AUTHORITY=true
BLOCK_IF_FREEZE_AUTHORITY=true

# ── Virtual simulation ────────────────────────────
VIRTUAL_STARTING_BALANCE=5
# Accurate mode: build Jupiter tx + simulateTransaction for real fees (~1.5s extra latency)
DRY_RUN_ACCURATE=false

# ── Fee guards (protect small trades) ────────────
# Reject BUY if estimated fees > X% of trade value
MAX_FEE_PCT=5
# Reserve this amount of SOL — never spend it on BUYs
MIN_SOL_RESERVE=0.005
# Alert via Telegram if execution slippage exceeds X% (LIVE mode)
COMPARE_ALERT_PCT=3

# ── A1: Position state machine ──────────────────────
# Timeout (minutes) avant de marquer une position SENT comme échouée (rollback)
PENDING_POSITION_TIMEOUT_MINUTES=5

# ── Unsafe parse handling ────────────────────────────
# Some transactions can only be parsed via nativeTransfers (decimals approximated to 6).
# false = reject these trades (UNSAFE_PARSE); true = allow them (default)
ALLOW_UNSAFE_PARSE_TRADES=true
# Skip Price Drift Guard for unsafe-parsed trades (approximated decimals make drift unreliable)
DISABLE_DRIFT_GUARD_ON_UNSAFE_PARSE=true

# ── SELL on SENT position ─────────────────────────────
# false = buffer up to SELL_ON_SENT_TIMEOUT_SECONDS waiting for CONFIRMED, then reject
ALLOW_SELL_ON_SENT_POSITION=false
# Max seconds to wait for SENT→CONFIRMED before rejecting the SELL (0 = reject immediately)
SELL_ON_SENT_TIMEOUT_SECONDS=10

# ── A4: Circuit breaker ─────────────────────────────
# Ouvre le circuit si taux d'échec > X% sur la fenêtre
CB_FAIL_RATE_PCT=30
# Fenêtre d'évaluation du circuit breaker (minutes)
CB_FAIL_WINDOW_MINUTES=10
# Ouvre le circuit si latence P99 dépasse ce seuil (ms)
CB_LATENCY_P99_MS=15000
# Ouvre le circuit si "no position found" ≥ N fois dans la fenêtre
CB_NO_POSITION_SPIKE=5
# Réinitialise automatiquement après N minutes (0 = manuel uniquement)
CB_AUTO_RESET_MINUTES=15

# ── Kill switches ──────────────────────────────────
PAUSE_TRADING=false
DRY_RUN=true

# ── Telegram ───────────────────────────────────────
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# ── Server ─────────────────────────────────────────
PORT=3000
